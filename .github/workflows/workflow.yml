name: test-workflow1

on:
  push:

jobs:
  test-api: 
    runs-on: ubuntu-latest
    steps:
    - run: exit 1

  slack-notify:
    if: failure()
    # if: (success() || needs.test-api.result == 'skipped') && !cancelled() 
    runs-on: ubuntu-latest
    needs: [test-api]
    steps:
      - run: echo hello from failure
    # - name: action-slack
    #   uses: 8398a7/action-slack@v3.12.0
    #   with:
    #     mention: ${{fromJSON(secrets.users)[github.actor]}} 
    #     if_mention: always
    #     text: "Check Github Actions"
    #     author_name: ${{github.job}}
    #     status: failure
    #     fields: commit, message
    #   env:
    #     SLACK_WEBHOOK_URL: ${{ secrets.SLACK_WEBHOOK_URL }}
